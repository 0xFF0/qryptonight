# Distributed under the MIT software license, see the accompanying
# file LICENSE or http://www.opensource.org/licenses/mit-license.php.
from unittest import TestCase
import time

from pyqryptonight.pyqryptonight import PoWHelper


class TestPowHelper(TestCase):
    def __init__(self, *args, **kwargs):
        super(TestPowHelper, self).__init__(*args, **kwargs)

    def test_difficulty(self):

        ph = PoWHelper()

        difficulty = (
            0x40, 0x42, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
        )

        boundary = ph.getBoundary(difficulty)

        expected_boundary = (
            0xA9, 0x9E, 0xCC, 0x3F, 0xFA, 0x26, 0x4D, 0x83,
            0xA2, 0x79, 0x00, 0x8B, 0xFC, 0xFA, 0x21, 0x36,
            0x58, 0x38, 0x49, 0xF3, 0xC7, 0xB4, 0x36, 0x8D,
            0xED, 0xB5, 0xA0, 0xF7, 0xC6, 0x10, 0x00, 0x00
        )

        self.assertEqual(expected_boundary, boundary)